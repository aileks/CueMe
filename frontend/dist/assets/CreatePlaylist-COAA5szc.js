import{c as P,r as a,j as e,M as L,a as q}from"./index-0oqpAsjj.js";import{C as D}from"./circle-plus-3fHV445V.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],R=P("sliders-vertical",J);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],B=P("x",K);function X(){const[c,p]=a.useState(""),C=["Rock","Pop","Punk","Hip-Hop","R&B","Jazz","Electronic","Classical","Country","Folk","Metal","Indie"],[n,m]=a.useState([]),[o,y]=a.useState(""),[r,x]=a.useState([]),[b,f]=a.useState(!1),[S,j]=a.useState(!1),[l,g]=a.useState(null),[N,d]=a.useState(""),[v,F]=a.useState({}),[u,A]=a.useState(!1),[i,w]=a.useState({});a.useEffect(()=>{G()},[]);const G=async()=>{try{const s=await fetch("/api/playlists/features");if(!s.ok)throw new Error(`Features fetch failed: ${s.statusText}`);const t=await s.json();F(t.features||{})}catch(s){console.error("Error fetching audio features:",s)}},E=s=>{n.includes(s)?m(n.filter(t=>t!==s)):m([...n,s])},k=()=>{o.trim()&&!r.includes(o)&&(x([...r,o.trim()]),y(""))},T=s=>{x(r.filter(t=>t!==s))},O=(s,t)=>{w({...i,[s]:t})},z=s=>{s.key==="Enter"&&(s.preventDefault(),k())},M=async s=>{if(s.preventDefault(),!c){d("Please enter a playlist name");return}if(n.length===0&&r.length===0&&Object.keys(i).length===0){d("Please select at least one genre, artist, or audio feature");return}try{f(!0),d("");const t=await fetch("/api/playlists/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,genres:n.map(H=>H.toLowerCase()),artists:r,features:i,trackCount:50})});if(!t.ok)throw new Error(`Failed to generate playlist: ${t.statusText}`);const h=await t.json();g(h),j(!0)}catch(t){console.error("Error generating playlist:",t),d("Failed to generate playlist. Please try again.")}finally{f(!1)}},I=async()=>{if(l)try{const s=await fetch("/api/playlists/playlist/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!s.ok)throw new Error("Failed to save playlist");const t=await s.json();alert("Playlist saved successfully!"),console.log("Saved playlist:",t)}catch(s){console.error("Error saving playlist:",s),alert("Failed to save playlist. Please try again.")}},_=()=>{j(!1),m([]),x([]),p("My New Playlist"),g(null),w({})},$=()=>e.jsxs("div",{className:"mb-6 neu-card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Audio Features"}),e.jsxs("button",{type:"button",className:"flex neu-button items-center gap-2",onClick:()=>A(!u),children:[e.jsx(R,{className:"h-5 w-5"}),u?"Hide Features":"Show Features"]})]}),u&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(v).map(([s,t])=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"mb-1 block font-medium",children:[s.charAt(0).toUpperCase()+s.slice(1),i[s]!==void 0&&`: ${i[s].toFixed(2)}`]}),e.jsx("input",{type:"range",min:t.min,max:t.max,step:(t.max-t.min)/100,value:i[s]||t.mean,onChange:h=>O(s,parseFloat(h.target.value)),className:"h-2 w-full cursor-pointer appearance-none rounded-lg bg-muted"}),e.jsxs("div",{className:"mt-1 flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"High"})]}),t.description&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:t.description})]},s))})]});return e.jsxs("div",{className:"mx-auto max-w-3xl",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Create New Playlist"}),N&&e.jsx("div",{className:"mb-4 bg-destructive p-3 text-destructive-foreground",children:N}),S?e.jsxs("div",{className:"neu-card",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Playlist Generated!"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-xl font-medium",children:l.playlist_name}),l.genres.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Genres:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.genres.map(s=>e.jsx("span",{className:"neu-tag",children:s},s))})]}),l.artists.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Artists:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.artists.map(s=>e.jsxs("span",{className:"neu-tag flex items-center gap-1",children:[e.jsx(L,{size:14}),s]},s))})]})]}),l.tracks.length>0?e.jsxs("div",{className:"mb-6 max-h-96 overflow-auto",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Tracks"}),e.jsx("div",{className:"border-border-color border-t",children:l.tracks.map((s,t)=>e.jsxs("div",{className:"border-border-color flex justify-between border-b px-2 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.artist})]}),e.jsx("div",{className:"text-right text-sm text-muted-foreground",children:s.album})]},s.id||t))})]}):e.jsx("div",{className:"mb-6 bg-muted p-4 text-center",children:e.jsx("p",{children:"No tracks found matching your criteria. Try different genres or artists."})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"neu-button",onClick:_,children:"Create Another"}),e.jsx("button",{className:"neu-button",onClick:I,children:"Save Playlist"})]})]}):e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"mb-6 neu-card",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Playlist Details"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"playlistName",className:"mb-2 block font-medium",children:"Playlist Name"}),e.jsx("input",{id:"playlistName",type:"text",className:"neu-input w-full",value:c,onChange:s=>p(s.target.value),placeholder:"My Awesome Playlist",required:!0})]})]}),e.jsxs("div",{className:"mb-6 neu-card",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Select Genres"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:C.map(s=>e.jsx("button",{type:"button",className:`neu-tag cursor-pointer transition-colors duration-200 ${n.includes(s)?"bg-primary text-primary-foreground":""}`,onClick:()=>E(s),children:s},s))})]}),e.jsxs("div",{className:"mb-6 neu-card",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Add Artists"}),e.jsxs("div",{className:"mb-4 flex",children:[e.jsx("input",{type:"text",className:"neu-input flex-grow",value:o,onChange:s=>y(s.target.value),onKeyPress:z,placeholder:"Artist name"}),e.jsx("button",{type:"button",className:"ml-2 neu-button",onClick:k,children:e.jsx(D,{size:20})})]}),r.length>0&&e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:r.map(s=>e.jsxs("div",{className:"neu-tag flex items-center gap-2",children:[s,e.jsx("button",{type:"button",className:"text-muted-foreground hover:text-destructive",onClick:()=>T(s),children:e.jsx(B,{size:16})})]},s))})]}),Object.keys(v).length>0&&$(),e.jsx("button",{type:"submit",className:"neu-button",disabled:b||!n.length&&!r.length&&Object.keys(i).length===0||!c,children:b?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Playlist"})]})]})}export{X as default};
